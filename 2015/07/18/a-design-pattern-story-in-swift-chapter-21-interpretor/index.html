<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      A Design Pattern Story in Swift – Chapter 21: Interpretor &middot; Audrey Li's Personal Blog
    
  </title>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <link rel='stylesheet' href='http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css'>
  <link rel="stylesheet" type="text/css" href="/assets/bootstrap/css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="/assets/bootstrap/css/bootstrap-theme.css">


 
  <!-- CSS -->
  <!-- build:css /assets/stylesheets/style.min.css -->
  <link rel="stylesheet" href="/assets/stylesheets/style.css">
  <!-- endbuild -->
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=RobotoDraft:100,300,400|Roboto:300,300italic,400">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/images/favicons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/images/favicons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/images/favicons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/images/favicons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/images/favicons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/images/favicons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/images/favicons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/images/favicons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicons/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/assets/images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/assets/images/favicons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/assets/images/favicons/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/assets/images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/assets/images/favicons/manifest.json">
  <meta name="apple-mobile-web-app-title" content="Audrey's Blog">
  <meta name="application-name" content="Audrey's Blog">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content="/assets/images/favicons/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">

</head>

  
  <body>
    <nav id="push_sidebar">
    <div class="social-icons">
        <img src="/assets/images/audrey-li.jpg" alt="Audrey's Photo" class="img-circle">

        <a href="https://github.com/vidaaudrey" title="Audrey's Github">
            <span class="fa-stack fa-lg">
              <i class="fa fa-circle fa-stack-2x"></i>
              <i class="fa fa-github fa-stack-1x fa-inverse"></i>
            </span>

        <a href="https://www.facebook.com/audreyauli" title="Audrey's Facebook">
            <span class="fa-stack fa-lg">
              <i class="fa fa-circle fa-stack-2x"></i>
              <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
            </span>
        </a>

        <a href="https://www.linkedin.com/in/audreyauli" title="Audrey's Google Plus">
            <span class="fa-stack fa-lg">
              <i class="fa fa-circle fa-stack-2x"></i>
              <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
            </span>
        </a>
        
        <a href="/assets/images/wechat.jpg" title="Audrey's Wechat">
            <span class="fa-stack fa-lg">
              <i class="fa fa-circle fa-stack-2x"></i>
              <i class="fa fa-weixin fa-stack-1x fa-inverse"></i>
            </span>
        </a>

    </div>

    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="#">Portfolio</a></li>
      <li><a href="/archive">Archive</a></li>
      <li><a href="/atom.xml">Feed</a></li>
      <li><a href="/about">About</a></li>
    </ul>
</nav>

    <div id="body-wrap">
      <header class="nav-down"  id="wrapper">
    <div class="container-fluid">
       <a class="navbar-brand" href="/"><img alt="Brand" src="/assets/images/normal/logo-dark-round.png"></a>
       <span class="nav_trigger"><span class="glyphicon glyphicon-menu-hamburger"></span></span>
    </div>
</header>
      

<!-- jumbotron for pages -->

<!-- jumbotron for post page, with feature image -->
  
      <div class="jumbotron jumbotron-post" style="background-image: url('/assets/wp-content/uploads/2015/07/co-1080x675.jpg')">
         <div class="fullwidth-wrapper">
    <div class="col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1 col-xs-12 ">
      <div class="main-wrap">
           <h2 class="post-title">A Design Pattern Story in Swift – Chapter 21: Interpretor</h2>
            <p class="post-date">18 Jul 2015</p>
      </div>
    </div>
</div>
        
      </div>

  <!-- jumbotron for post page, without feature image -->
  






      <main class="row">
          <div class="col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1 col-xs-12 ">
              <div class="main-wrap">
                <div class="post card">
   <p>An interpreter translate our plain language expression into information and find out what we need. Here we have a  Unit Interpretor (Conversion Context) who does very diverse interpretation jobs.
&lt;!&ndash;more&ndash;&gt;</p>

<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">enum</span> <span class="nl">UnitType</span><span class="p">:</span> <span class="n">String</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">Gallon</span> <span class="o">=</span> <span class="s">&quot;Gallon&quot;</span>
    <span class="k">case</span> <span class="n">Pint</span> <span class="o">=</span> <span class="s">&quot;Pint&quot;</span>
    <span class="k">case</span> <span class="n">Cup</span> <span class="o">=</span> <span class="s">&quot;Cup&quot;</span>
    <span class="k">case</span> <span class="n">USD</span> <span class="o">=</span> <span class="s">&quot;USD&quot;</span>
    <span class="k">case</span> <span class="n">RMB</span> <span class="o">=</span> <span class="s">&quot;RMB&quot;</span>
    <span class="k">case</span> <span class="n">EURO</span> <span class="o">=</span> <span class="s">&quot;EURO&quot;</span>
    <span class="k">case</span> <span class="n">Meter</span> <span class="o">=</span> <span class="s">&quot;Meter&quot;</span>
    <span class="k">case</span> <span class="n">Unkonwn</span> <span class="o">=</span> <span class="s">&quot;Unknown&quot;</span>
    <span class="k">init</span><span class="p">(</span><span class="nl">str</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="n">str</span> <span class="p">{</span>
            <span class="k">case</span> <span class="s">&quot;Gallon&quot;</span><span class="p">,</span> <span class="s">&quot;Gallons&quot;</span><span class="p">,</span> <span class="s">&quot;gallons&quot;</span><span class="o">:</span> <span class="nb">self</span> <span class="o">=</span> <span class="p">.</span><span class="n">Gallon</span>
            <span class="k">case</span> <span class="s">&quot;Pint&quot;</span><span class="p">,</span> <span class="s">&quot;Pints&quot;</span><span class="p">,</span> <span class="s">&quot;pints&quot;</span><span class="o">:</span> <span class="nb">self</span> <span class="o">=</span> <span class="p">.</span><span class="n">Pint</span>
            <span class="k">case</span> <span class="s">&quot;Cup&quot;</span><span class="p">,</span> <span class="s">&quot;Cups&quot;</span><span class="p">,</span> <span class="s">&quot;cups&quot;</span><span class="o">:</span> <span class="nb">self</span> <span class="o">=</span> <span class="p">.</span><span class="n">Cup</span>
            <span class="k">case</span> <span class="s">&quot;USD&quot;</span><span class="p">,</span> <span class="s">&quot;usd&quot;</span><span class="p">,</span> <span class="s">&quot;Usd&quot;</span><span class="o">:</span> <span class="nb">self</span> <span class="o">=</span> <span class="p">.</span><span class="n">USD</span>
            <span class="k">case</span> <span class="s">&quot;EURO&quot;</span><span class="p">,</span> <span class="s">&quot;euro&quot;</span><span class="p">,</span> <span class="s">&quot;Euro&quot;</span><span class="o">:</span> <span class="nb">self</span> <span class="o">=</span> <span class="p">.</span><span class="n">EURO</span>
            <span class="k">case</span> <span class="s">&quot;RMB&quot;</span><span class="p">,</span> <span class="s">&quot;rmb&quot;</span><span class="p">,</span> <span class="s">&quot;Rmb&quot;</span><span class="o">:</span> <span class="nb">self</span> <span class="o">=</span> <span class="p">.</span><span class="n">RMB</span>
        <span class="k">default</span><span class="o">:</span> <span class="nb">self</span> <span class="o">=</span> <span class="p">.</span><span class="n">Unkonwn</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">protocol</span> <span class="n">Expression</span> <span class="p">{</span>
    <span class="k">func</span> <span class="n">getUnit</span><span class="p">(</span><span class="nl">quantity</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="nl">targetUnit</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">Double</span>
<span class="p">}</span>
<span class="k">class</span> <span class="nl">Gallon</span><span class="p">:</span> <span class="bp">NSObject</span><span class="p">,</span> <span class="n">Expression</span> <span class="p">{</span>
    <span class="k">func</span> <span class="n">getUnit</span><span class="p">(</span><span class="nl">quantity</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="nl">targetUnit</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">Double</span> <span class="p">{</span>
        <span class="k">let</span> <span class="n">targetUnitType</span> <span class="o">=</span> <span class="n">UnitType</span><span class="p">(</span><span class="nl">str</span><span class="p">:</span> <span class="n">targetUnit</span><span class="p">)</span>
        <span class="k">switch</span> <span class="n">targetUnitType</span> <span class="p">{</span>
        <span class="k">case</span> <span class="p">.</span><span class="nl">Gallon</span><span class="p">:</span> <span class="k">return</span> <span class="n">quantity</span>
        <span class="k">case</span> <span class="p">.</span><span class="nl">Pint</span><span class="p">:</span> <span class="k">return</span> <span class="n">quantity</span> <span class="o">*</span> <span class="mi">8</span>
        <span class="k">case</span> <span class="p">.</span><span class="nl">Cup</span><span class="p">:</span> <span class="k">return</span> <span class="n">quantity</span> <span class="o">*</span> <span class="mi">16</span>
        <span class="k">default</span><span class="o">:</span>
            <span class="n">print</span><span class="p">(</span><span class="s">&quot;conversion not supported&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span> <span class="c1">// just saying it&#39;s a wrong number</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">class</span> <span class="nl">Pint</span><span class="p">:</span> <span class="bp">NSObject</span><span class="p">,</span> <span class="n">Expression</span> <span class="p">{</span>
    <span class="k">func</span> <span class="n">getUnit</span><span class="p">(</span><span class="nl">quantity</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="nl">targetUnit</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">Double</span> <span class="p">{</span>
        <span class="k">let</span> <span class="n">targetUnitType</span> <span class="o">=</span> <span class="n">UnitType</span><span class="p">(</span><span class="nl">str</span><span class="p">:</span> <span class="n">targetUnit</span><span class="p">)</span>
        <span class="k">switch</span> <span class="n">targetUnitType</span> <span class="p">{</span>
        <span class="k">case</span> <span class="p">.</span><span class="nl">Gallon</span><span class="p">:</span> <span class="k">return</span> <span class="n">quantity</span> <span class="o">*</span> <span class="mf">0.125</span>
        <span class="k">case</span> <span class="p">.</span><span class="nl">Pint</span><span class="p">:</span> <span class="k">return</span> <span class="n">quantity</span>
        <span class="k">case</span> <span class="p">.</span><span class="nl">Cup</span><span class="p">:</span> <span class="k">return</span> <span class="n">quantity</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="k">default</span><span class="o">:</span>
            <span class="n">print</span><span class="p">(</span><span class="s">&quot;conversion not supported&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="p">}</span>
        
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">class</span> <span class="nl">USD</span><span class="p">:</span> <span class="bp">NSObject</span><span class="p">,</span> <span class="n">Expression</span> <span class="p">{</span>
    <span class="k">func</span> <span class="n">getUnit</span><span class="p">(</span><span class="nl">quantity</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="nl">targetUnit</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">Double</span> <span class="p">{</span>
        <span class="k">let</span> <span class="n">targetUnitType</span> <span class="o">=</span> <span class="n">UnitType</span><span class="p">(</span><span class="nl">str</span><span class="p">:</span> <span class="n">targetUnit</span><span class="p">)</span>
        <span class="k">switch</span> <span class="n">targetUnitType</span> <span class="p">{</span>
        <span class="k">case</span> <span class="p">.</span><span class="nl">USD</span><span class="p">:</span> <span class="k">return</span> <span class="n">quantity</span>
        <span class="k">case</span> <span class="p">.</span><span class="nl">EURO</span><span class="p">:</span> <span class="k">return</span> <span class="n">quantity</span> <span class="o">*</span> <span class="mf">0.92</span>
        <span class="k">case</span> <span class="p">.</span><span class="nl">RMB</span><span class="p">:</span> <span class="k">return</span> <span class="n">quantity</span> <span class="o">*</span> <span class="mf">6.21</span>
        <span class="k">default</span><span class="o">:</span>
            <span class="n">print</span><span class="p">(</span><span class="s">&quot;conversion not supported&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="p">}</span>
        
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nl">RMB</span><span class="p">:</span> <span class="bp">NSObject</span><span class="p">,</span> <span class="n">Expression</span> <span class="p">{</span>
    <span class="k">func</span> <span class="n">getUnit</span><span class="p">(</span><span class="nl">quantity</span><span class="p">:</span> <span class="n">Double</span><span class="p">,</span> <span class="nl">targetUnit</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">Double</span> <span class="p">{</span>

        <span class="k">let</span> <span class="n">targetUnitType</span> <span class="o">=</span> <span class="n">UnitType</span><span class="p">(</span><span class="nl">str</span><span class="p">:</span> <span class="n">targetUnit</span><span class="p">)</span>
        <span class="k">switch</span> <span class="n">targetUnitType</span> <span class="p">{</span>
        <span class="k">case</span> <span class="p">.</span><span class="nl">USD</span><span class="p">:</span> <span class="k">return</span> <span class="n">quantity</span> <span class="o">*</span> <span class="mf">0.16</span>
        <span class="k">case</span> <span class="p">.</span><span class="nl">EURO</span><span class="p">:</span> <span class="k">return</span> <span class="n">quantity</span> <span class="o">*</span> <span class="mf">0.15</span>
        <span class="k">case</span> <span class="p">.</span><span class="nl">RMB</span><span class="p">:</span> <span class="k">return</span> <span class="n">quantity</span>
        <span class="k">default</span><span class="o">:</span>
            <span class="n">print</span><span class="p">(</span><span class="s">&quot;conversion not supported&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">AppConfig</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">let</span> <span class="n">AppName</span> <span class="o">=</span> <span class="s">&quot;interpretor&quot;</span>
<span class="p">}</span>
<span class="c1">// The context to translate a sentence into related command and get the result.</span>
<span class="k">class</span> <span class="n">ConversionContext</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">let</span> <span class="n">sharedInstance</span> <span class="o">=</span> <span class="n">ConversionContext</span><span class="p">()</span>
    <span class="n">private</span> <span class="k">func</span> <span class="n">getTargetQuantity</span><span class="p">(</span><span class="nl">fromConversion</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="nl">toConversion</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="nl">quantity</span><span class="p">:</span> <span class="n">Double</span><span class="p">)</span> <span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">Double</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">fromConversion</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span> <span class="p">{</span>
            <span class="k">let</span> <span class="n">classStr</span> <span class="o">=</span> <span class="n">UnitType</span><span class="p">(</span><span class="nl">str</span><span class="p">:</span> <span class="n">fromConversion</span><span class="p">).</span><span class="n">rawValue</span>
            <span class="n">guard</span> <span class="k">let</span> <span class="nl">anyObjecType</span> <span class="p">:</span> <span class="n">AnyObject</span><span class="p">.</span><span class="kt">Type</span> <span class="o">=</span> <span class="n">NSClassFromString</span><span class="p">(</span><span class="s">&quot;\(AppConfig.AppName).\(classStr)&quot;</span><span class="p">)</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="n">classStr</span> <span class="o">==</span> <span class="s">&quot;EURO&quot;</span> <span class="o">||</span> <span class="n">classStr</span> <span class="o">==</span> <span class="s">&quot;Cup&quot;</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="k">return</span> <span class="o">-</span><span class="mi">3</span>
                    <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">let</span> <span class="nl">nsObjecType</span> <span class="p">:</span> <span class="bp">NSObject</span><span class="p">.</span><span class="kt">Type</span> <span class="o">=</span> <span class="n">anyObjecType</span> <span class="kt">as</span><span class="o">!</span> <span class="bp">NSObject</span><span class="p">.</span><span class="kt">Type</span>
            
            <span class="n">guard</span> <span class="k">let</span> <span class="n">object</span> <span class="o">=</span> <span class="n">nsObjecType</span><span class="p">()</span> <span class="kt">as</span><span class="o">?</span> <span class="n">Expression</span> <span class="k">else</span> <span class="p">{</span><span class="k">return</span> <span class="o">-</span><span class="mi">4</span> <span class="p">}</span>
            <span class="k">return</span>  <span class="n">object</span><span class="p">.</span><span class="n">getUnit</span><span class="p">(</span><span class="n">quantity</span><span class="p">,</span> <span class="nl">targetUnit</span><span class="p">:</span> <span class="n">toConversion</span><span class="p">)</span>
        
        <span class="p">}</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">2</span>
    <span class="p">}</span>
    <span class="k">func</span> <span class="n">getConversionFromInput</span><span class="p">(</span><span class="nl">input</span><span class="p">:</span><span class="n">String</span><span class="p">)</span> <span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">String</span> <span class="p">{</span>
        <span class="k">let</span> <span class="n">partsOfQues</span> <span class="o">=</span> <span class="n">input</span><span class="p">.</span><span class="n">componentsSeparatedByString</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">)</span>
        <span class="k">let</span> <span class="n">fromConversion</span> <span class="o">=</span> <span class="n">partsOfQues</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">let</span> <span class="n">toConversion</span> <span class="o">=</span> <span class="n">partsOfQues</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">let</span> <span class="n">quantity</span> <span class="o">=</span> <span class="n">Double</span><span class="p">(</span><span class="n">partsOfQues</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">!</span>
        
        <span class="k">let</span> <span class="n">targetQuantity</span> <span class="o">=</span> <span class="n">getTargetQuantity</span><span class="p">(</span><span class="n">fromConversion</span><span class="p">,</span> <span class="nl">toConversion</span><span class="p">:</span> <span class="n">toConversion</span><span class="p">,</span> <span class="nl">quantity</span><span class="p">:</span> <span class="n">quantity</span><span class="p">)</span>
        <span class="k">switch</span> <span class="n">targetQuantity</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">-</span><span class="mi">1</span><span class="o">:</span> <span class="k">return</span> <span class="s">&quot;Currently we only support conversion from RMB, USD, Gallon and Pint. \(fromConversion) is not supported&quot;</span>
        <span class="k">case</span> <span class="o">-</span><span class="mi">3</span><span class="o">:</span> <span class="k">return</span> <span class="s">&quot;We can&#39;t recognize your input yet. Try something like RMB, rmb, Gallon, Gallons...&quot;</span>
        <span class="k">case</span> <span class="o">-</span><span class="mi">2</span><span class="o">:</span> <span class="k">return</span> <span class="s">&quot;Sorry, we couldn&#39;t identify the source conversion. Try something like [ 10 Gallons to Pints ]&quot;</span>
        <span class="k">case</span> <span class="o">-</span><span class="mi">4</span><span class="o">:</span> <span class="k">return</span> <span class="s">&quot;Couldn&#39;t convert. The object we created doesn&#39;t conform with Expression protocol&quot;</span>
        <span class="k">case</span> <span class="k">let</span> <span class="n">x</span> <span class="k">where</span> <span class="n">x</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">=</span> <span class="mi">0</span> <span class="o">:</span>  <span class="k">return</span> <span class="s">&quot;\(partsOfQues[0]) \(partsOfQues[1]) equals \(targetQuantity) \(partsOfQues[3])&quot;</span>
        <span class="k">default</span><span class="o">:</span> <span class="k">return</span> <span class="s">&quot;Some other unknow error happened &quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">getOutput</span><span class="p">(</span><span class="nl">input</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">String</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">&quot;Getting user input:[ \(input) ]&quot;</span><span class="p">)</span>
    <span class="k">let</span> <span class="n">context</span> <span class="o">=</span> <span class="n">ConversionContext</span><span class="p">.</span><span class="n">sharedInstance</span>
    <span class="k">return</span> <span class="n">context</span><span class="p">.</span><span class="n">getConversionFromInput</span><span class="p">(</span><span class="n">input</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Testing. User inputs a sentence and the conversionContext will translate it</span>
<span class="k">let</span> <span class="n">userInput</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">&quot;10 Gallons is Pints&quot;</span><span class="p">,</span>
    <span class="s">&quot;231 Gallo is Pints&quot;</span><span class="p">,</span>
    <span class="s">&quot;32.11 Pints in Gallon&quot;</span><span class="p">,</span>
    <span class="s">&quot;2001.99 USD to RMB&quot;</span><span class="p">,</span>
    <span class="s">&quot;984.2323 rmb in EURO&quot;</span><span class="p">,</span>
    <span class="s">&quot;23 Euro in RMB&quot;</span>
<span class="p">]</span>
<span class="n">userInput</span><span class="p">.</span><span class="n">map</span><span class="p">{</span> <span class="n">print</span><span class="p">(</span><span class="s">&quot;Output: [ \(getOutput($0)) ] </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span> <span class="p">}</span></code></pre></div>

<p><a href="/assets/wp-content/uploads/2015/07/interpretor.png"><img class="aligncenter size-full wp-image-1086" src="/assets/wp-content/uploads/2015/07/interpretor.png" alt="interpretor" width="693" height="290" /></a></p>

<p><p class="p1"></p>

 </div>
 <div class="card">
   <div class="page-nav">
    <div>
        
         <a class="prev" href="/2015/07/18/a-design-pattern-story-in-swift-chapter-20-mediator/"> <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span></a> 
          <a class="prev" href="/2015/07/18/a-design-pattern-story-in-swift-chapter-20-mediator/"> A Design Pattern Story in Swift – Chapter 20: Mediator</a>
        
    </div>
    <div>
        
          <a class="next" href="/jekyll/2015/09/27/relocating-my-blog-from-wordpress-to-Jekyll/">Relocating My Blog from Wordpress to Jekyll </a>
         <a class="prev" href="/jekyll/2015/09/27/relocating-my-blog-from-wordpress-to-Jekyll/"> <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> 
        
    </div>
</div>



 </div>
 <div class="related card">
   <h2>Related Posts</h2>
   <ul class="related-posts">
     
       <li>
         <h4>
           <a href="/jekyll/2015/09/27/relocating-my-blog-from-wordpress-to-Jekyll/">
             Relocating My Blog from Wordpress to Jekyll
             <small>27 Sep 2015</small>
           </a>
         </h4>
       </li>
     
       <li>
         <h4>
           <a href="/2015/07/18/a-design-pattern-story-in-swift-chapter-20-mediator/">
             A Design Pattern Story in Swift – Chapter 20: Mediator
             <small>18 Jul 2015</small>
           </a>
         </h4>
       </li>
     
       <li>
         <h4>
           <a href="/2015/07/17/a-design-pattern-story-in-swift-chapter-19-flyweight/">
             A Design Pattern Story in Swift – Chapter 19: Flyweight
             <small>17 Jul 2015</small>
           </a>
         </h4>
       </li>
     
   </ul>
 </div>
 <div class="card">
 <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'audreyli';
    
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
 </div>
      
    




              </div>
          </div>
          
      </main>

      <footer class="row">
    <div class="col-md-8 col-md-offset-2 text-center">
        &copy Copyright 2015 &nbsp; &nbsp; AudreyLi.me &nbsp; &nbsp;<a href="mailto:me@audreyli.me">Get in touch</a>
    </div>
    
</footer>


      <!-- Latest compiled and minified JavaScript -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

<!-- JS -->
<!-- build:js /assets/javascript/all.min.js -->
<script src="/assets/javascript/javascript.js"></script> 
<script src="/assets/javascript/main.js"></script> 
<!-- endbuild -->
  </div>
  </body>
</html>
